<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>숫자 문제 단계별 웹</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #f0f0f0;
      padding-top: 50px;
    }
    #container {
      background-color: #fff;
      width: 300px;
      margin: auto;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      position: relative;
    }
    #problem {
      font-size: 2em;
      margin-bottom: 20px;
    }
    #stageInfo {
      margin-bottom: 20px;
      font-weight: bold;
    }
    button {
      padding: 10px 20px;
      font-size: 1em;
      border: none;
      background-color: #3498db;
      color: #fff;
      border-radius: 4px;
      cursor: pointer;
    }
    button:disabled {
      background-color: #95a5a6;
      cursor: not-allowed;
    }
    /* Countdown 오버레이 */
    #overlay {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-color: rgba(0,0,0,0.7);
      color: #fff;
      font-size: 3em;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 8px;
      display: none;
    }
  </style>
</head>
<body>
  <div id="container">
    <div id="stageInfo"></div>
    <div id="problem"></div>
    <button id="nextBtn">다음 단계</button>
    <div id="overlay"></div>
  </div>

  <script>
    // 총 단계 수: 5단계 (6자리부터 10자리)
    const totalStages = 5;
    let currentStage = 1;

    const stageInfoEl = document.getElementById('stageInfo');
    const problemEl = document.getElementById('problem');
    const nextBtn = document.getElementById('nextBtn');
    const overlayEl = document.getElementById('overlay');

    // 해당 자리수의 무작위 숫자 문자열 생성 함수
    function generateRandomNumberString(digits) {
      // 첫자리는 0이 아니도록 처리
      const min = Math.pow(10, digits - 1);
      const max = Math.pow(10, digits) - 1;
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    // 현재 단계에 맞게 화면 업데이트
    function updateStage() {
      stageInfoEl.textContent = `단계 ${currentStage} / ${totalStages}`;
      const digitCount = currentStage + 5;  // 1단계: 6자리, 2단계: 7자리, ... 5단계: 10자리
      problemEl.textContent = generateRandomNumberString(digitCount);
      // 마지막 단계에서는 버튼 비활성화
      if(currentStage >= totalStages){
        nextBtn.disabled = true;
        nextBtn.textContent = '완료';
      } else {
        nextBtn.disabled = false;
        nextBtn.textContent = '다음 단계';
      }
    }

    // 카운트다운 함수 (초단위)
    function startCountdown(seconds, callback) {
      overlayEl.style.display = 'flex';
      let count = seconds;
      overlayEl.textContent = count;
      const interval = setInterval(() => {
        count--;
        if(count > 0){
          overlayEl.textContent = count;
        } else {
          clearInterval(interval);
          overlayEl.style.display = 'none';
          callback();
        }
      }, 1000);
    }

    // "다음 단계" 버튼 클릭 시 동작
    nextBtn.addEventListener('click', () => {
      // 만약 마지막 단계라면 동작하지 않음
      if (currentStage >= totalStages) return;
      // 카운트다운 시작 후 다음 단계로 전환
      startCountdown(5, () => {
        currentStage++;
        updateStage();
      });
    });

    // 초기 화면 업데이트
    updateStage();
  </script>
</body>
</html>
